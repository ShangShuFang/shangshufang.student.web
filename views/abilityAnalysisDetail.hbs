<link href="/stylesheets/views/abilityAnalysisDetail.css" rel="stylesheet" type="text/css"/>
<link href="/stylesheets/views/courseCenter.css" rel="stylesheet" type="text/css" />
<div class="kt-container kt-grid__item kt-grid__item--fluid" id="app">
  <div class="kt-subheader kt-grid__item">
    <div class="kt-container">
      <div class="kt-subheader__main">
        <h3 class="kt-subheader__title"></h3>
      </div>
    </div>
  </div>
  <div class="kt-container  kt-grid__item kt-grid__item--fluid">
    <div class="kt-grid kt-grid--desktop kt-grid--ver kt-grid--ver-desktop kt-login-alert kt-hidden">
      <div class="alert alert-secondary kt-block-center kt-font-bold" role="alert">
        <div class="alert-text text-center">
          同学，你还没有登陆，快去<a href="/login?backUrl=/ability/analysis/detail?s=m">登陆</a>，看看自己的成长之旅吧！
        </div>
      </div>
    </div>

    <div class="kt-grid kt-grid--desktop kt-grid--ver kt-grid--ver-desktop kt-parameter-alert kt-hidden">
      <div class="alert alert-secondary kt-block-center kt-font-bold" role="alert">
        <div class="alert-text text-center">
          未能读取到必要的参数，请不要修改浏览器地址栏的内容！
        </div>
      </div>
    </div>

    <div class="kt-grid kt-grid--desktop kt-grid--ver kt-grid--ver-desktop kt-app kt-hidden">
      <div class="kt-grid__item kt-app__toggle kt-app__aside" id="kt_user_profile_aside" style="opacity: 1;">
        <div class="kt-portlet kt-portlet--height-fluid-">
          <div class="kt-portlet__head  kt-portlet__head--noborder">
            <div class="kt-portlet__head-label">
              <h3 class="kt-portlet__head-title">
              </h3>
            </div>
          </div>
          <div class="kt-portlet__body kt-portlet__body--fit-y">
            <div class="kt-widget kt-widget--user-profile-1">
              <div class="kt-widget__head">
                <div class="kt-widget__media">
                  <img src="/media/users/user_default.png" class="student-photo" alt="image">
                </div>
                <div class="kt-widget__content">
                  <div class="kt-widget__section">
                    <span class="kt-widget__username">
                      <span class="student-name" v-text="studentName"></span>
                    </span>
                    <span class="kt-widget__subtitle">正在学习 <span class="learning-technology-count" v-text="learningTechnologyCount"></span> 项技术</span>
                    <span class="kt-widget__subtitle">已被 <span class="company-focus-count">0</span> 家企业关注</span>
                  </div>
                </div>
              </div>
              <div class="kt-widget__body">
                <div class="kt-widget__content">
                  <div class="kt-widget__info">
                    <span class="kt-widget__label">就读高校:</span>
                    <span class="kt-widget__data student-university" v-text="universityName"></span>
                  </div>
                  <div class="kt-widget__info">
                    <span class="kt-widget__label">就读专业:</span>
                    <span class="kt-widget__data student-school" v-text="majorName"></span>
                  </div>
<!--                  <div class="kt-widget__info">-->
<!--                    <span class="kt-widget__label">手机号码:</span>-->
<!--                    <span class="kt-widget__data student-cellphone" v-text="cellphone"></span>-->
<!--                  </div>-->
                  <div class="kt-widget__info">
                    <span class="kt-widget__label">电子邮箱:</span>
                    <span class="kt-widget__data student-email" v-text="email"></span>
                  </div>
                  <div class="kt-widget__info">
                    <span class="kt-widget__label">入学年份:</span>
                    <span class="kt-widget__data student-enrollment-year" v-text="enrollmentYear"></span>
                  </div>
                  <div class="kt-widget__info">
                    <span class="kt-widget__label">在线提问:</span>
                    <span class="kt-widget__data"><span class="online-question-count" v-text="onlineQuestionCount"></span>次</span>
                  </div>
                  <div class="kt-widget__info">
                    <span class="kt-widget__label">在线答疑:</span>
                    <span class="kt-widget__data"><span class="online-answer-count" v-text="onlineAnswerCount"></span>次</span>
                  </div>
                  <div class="kt-widget__info">
                    <span class="kt-widget__label">参与项目:</span>
                    <span class="kt-widget__data"><span class="project-count" v-text="joinProjectCount"></span>个</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="kt-grid__item kt-grid__item--fluid kt-app__content technology-analysis-detail">
        <div class="kt-portlet">
          <div class="kt-portlet__head">
            <div class="kt-portlet__head-label">
              <h3 class="kt-portlet__head-title">
                专业能力分析
              </h3>
            </div>
          </div>
          <div class="kt-portlet__body">
            <ul class="nav nav-pills nav-fill" role="tablist">
              <li class="nav-item">
                <a class="nav-link active" data-toggle="tab" :href="tabHref" @click="onShowTab(1)">课程学习分析</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-toggle="tab" :href="tabHref" @click="onShowTab(2)">就业测评分析</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-toggle="tab" :href="tabHref" @click="onShowTab(3)">实战项目分析</a>
              </li>
            </ul>
            <div class="tab-content">
              <div class="tab-pane active" id="course_learning_analysis" role="tabpanel">
                <div class="row courses" v-if="learningTechnologyList.length == 0">
                  <div class="col-md-12">
                    <div class="alert alert-solid-warning alert-bold" role="alert">
                      <div class="alert-text text-center">没有找到您参加课程学习的记录！</div>
                    </div>
                  </div>
                </div>
                <div class="row courses" v-if="learningTechnologyList.length > 0 && isShowCourseAnalysisDetail == false">
                  <div class="col-md-4" v-for="technology in learningTechnologyList">
                    <div class="kt-portlet kt-portlet--height-fluid">
                      <div class="kt-portlet__head kt-portlet__head--noborder kt-padding-0">
                        <img :src="technology.technologyThumbnailRectangle" alt="">

                        <div class="teacher-info" style="height: 45px; padding-left: 5px">
                          <div style="color: #ffffff">
                            课程学习进度
                          </div>
                          <div class="kt-widget__progress" style="width: 100%;">
                            <div class="progress" style="width: 83%">
                              <div role="progressbar" class="progress-bar kt-bg-success" :style="'width: ' + technology.finishedKnowledgePercent + '%'"></div>
                            </div>
                            <div class="kt-widget__stats kt-font-success ng-binding" v-text="technology.finishedKnowledgePercent + '%'"></div>
                          </div>
                        </div>
                      </div>
                      <div class="kt-portlet__body kt-padding-15">
                        <div class="kt-widget kt-widget--user-profile-2 ">
                          <div class="kt-widget__body kt-margin-b-0-">
                            <div class="kt-widget__item">
                              <div class="kt-widget__contact kt-margin-b-10">
                                <span class="kt-widget__data">专业级别:</span>
                                <span class="kt-widget__data" v-text="technology.abilityLevel"></span>
                              </div>
                              <div class="kt-widget__contact kt-margin-b-10">
                                <span class="kt-widget__data">能力站位:</span>
                                <span class="kt-widget__data" v-text="technology.positionSite + '%'"></span>
                              </div>
                              <div class="kt-widget__contact kt-margin-b-10">
                                <span class="kt-widget__data">掌握知识点:</span>
                                <span class="kt-widget__data" v-text="technology.finishedKnowledgeCount"></span>
                              </div>
                            </div>
                          </div>
                          <div class="kt-widget__footer kt-margin-t-15">
                            <div class="row">
                              <div class="col-md-12">
                               <button type="button" class="btn btn-secondary btn-elevate btn-square" @click="onShowCourseAnalysisDetail(technology)">查看明细</button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="row courses" v-if="isShowCourseAnalysisDetail == true">
                  <div class="col-md-12">
                    <!-- begin: 课程学习数据分析详细 -->
                    <div class="kt-portlet">
                      <div class="kt-portlet__head">
                        <div class="kt-portlet__head-label">
                          <h3 class="kt-portlet__head-title" v-text="learningAnalysisDetail.technologyName">
                          </h3>
                        </div>
                        <div class="kt-portlet__head-toolbar">
                          <div class="kt-portlet__head-group">
                            <button type="button" class="btn btn-sm btn-secondary" @click="onHideCourseAnalysisDetail()">
                              <i class="fa fa-undo"></i> 返回
                            </button>
                          </div>
                        </div>
                      </div>
                      <div class="kt-portlet__body" kt-hidden-height="240" style="">
                        <div class="kt-widget12">
                          <div class="kt-widget12__content">
                            <div class="kt-widget12__item">
                              <div class="kt-widget12__info">
                                <span class="kt-widget12__desc">专业能力</span>
                                <span class="kt-widget12__value">
                                  <span class="ability-level technology1-level ability-level-1" v-text="learningAnalysisDetail.abilityLevel"></span>
                                  <span>超过站内<span class="position-site technology1-position" v-text="learningAnalysisDetail.positionSite + '%'"></span>的同学</span>
                                </span>
                              </div>
                              <div class="kt-widget12__info">
                                <span class="kt-widget12__desc">学习完成度</span>
                                <div class="kt-widget12__progress">
                                  <div class="progress kt-progress--sm">
                                    <div class="progress-bar kt-bg-success learning-percent" role="progressbar" :style="'width: ' + learningAnalysisDetail.finishedKnowledgePercent + '%'"></div>
                                  </div>
                                  <span class="kt-widget12__stat learning-percent-text" v-text="learningAnalysisDetail.finishedKnowledgePercent + '%'"></span>
                                </div>
                              </div>
                            </div>
                            <div class="kt-widget12__item">
                              <div class="kt-widget12__info">
                                <span class="kt-widget12__desc text-center">
                                  知识点掌握情况分析
                                  <a href="javascript:" class="kt-link--info btn-detail-knowledge" @click="onShowKnowledgeAnalysisList()">(查看数据)</a>
                                </span>
                                <div id="knowledgeAnalysis" style="height: 280px;"></div>
                              </div>
                              <div class="kt-widget12__info">
                                <span class="kt-widget12__desc text-center">
                                  代码规范问题分析
                                  <a href="javascript:" class="kt-link--info btn-detail-code-standard" @click="onShowCodeStandardAnalysisList()">(查看数据)</a>
                                </span>
                                <div id="codeStandardAnalysis" style="height: 280px;"></div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- end: 课程学习数据分析详细 -->
                  </div>
                </div>

              </div>
              <div class="tab-pane" id="comprehensive_analysis" role="tabpanel">
                <div class="kt-widget12">
                  <div class="kt-widget12__content kt-margin-t-15">
                    <div class="group-list" v-for="data in comprehensiveExercisesAnalysis">
                      <div class="kt-widget12__item">
                        <div class="kt-widget12__info comprehensive-total-count" v-text="data.technologyName + '测评题'">
                        </div>
                      </div>

                      <div class="alert alert-solid-warning alert-bold" role="alert" v-if="data.submitTotalCount == 0">
                        <div class="alert-text text-center" v-text="'您还没有提交任何' + data.technologyName + '测评题'"></div>
                      </div>

                      <div class="group-item" v-if="data.submitTotalCount > 0">
                        <div class="kt-widget12__item">
                          <div class="kt-widget12__info kt-font-bolder" v-text="'总习题：' + data.totalCount + '道'">
                          </div>
                          <div class="kt-widget12__info comprehensive-submit-count" v-text="'已提交：' + data.submitTotalCount + '道'">
                          </div>
                          <div class="kt-widget12__info comprehensive-correct-count" :class="{'kt-font-success': data.correctTotalCount > 0}" v-text="'正确：' + data.correctTotalCount + '道'">
                          </div>
                          <div class="kt-widget12__info comprehensive-error-count" :class="{'kt-font-danger': data.errorTotalCount > 0}" v-text="'错误：' + data.errorTotalCount + '道'">
                          </div>
                          <div class="kt-widget12__info comprehensive-not-submit-count" :class="{'kt-font-warning': data.unSubmitTotalCount > 0}" v-text="'未提交：' + data.unSubmitTotalCount + '道'">
                          </div>
                        </div>
                        <div class="kt-widget12__item">
                          <div class="kt-widget12__info">
                            <table class="table table-bordered">
                              <thead>
                              <tr role="row">
                                <th style="width: 70%">技术点</th>
                                <th style="width: 30%">测评结果</th>
                              </tr>
                              </thead>
                              <tbody>
                              <tr v-for="knowledgeAnalysis in data.knowledgeAnalysisVOList">
                                <td style="width: 70%" v-text="knowledgeAnalysis.knowledgeName"></td>
                                <td style="width: 30%">
                                  <span class="kt-badge kt-badge--inline kt-badge--pill"
                                        :class="{'kt-badge--success': knowledgeAnalysis.result == 'Y', 'kt-badge--danger': knowledgeAnalysis.result == 'N'}"
                                        v-text="knowledgeAnalysis.resultText"></span>
                                </td>
                              </tr>
                              </tbody>
                            </table>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="tab-pane" id="project_analysis" role="tabpanel">
                <div class="alert alert-solid-warning alert-bold" role="alert">
                  <div class="alert-text text-center">您还没有提交任何实战项目</div>
                </div>
              </div>
              <div id="kt_morris_1" style="height:500px;"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="kt_modal_knowledge" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">知识点掌握情况</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          </button>
        </div>
        <div class="modal-body">
          <div class="kt-scroll ps ps--active-y" data-scroll="true" data-height="550"
               style="max-height: 550px; overflow: hidden;">
            <div class="row">
              <div class="col-md-4">
                <div class="kt-portlet">
                  <div class="kt-portlet__head">
                    <div class="kt-portlet__head-label">
                      <h3 class="kt-portlet__head-title" v-text="'已掌握的知识点（' + learnedKnowledgeAnalysisList.length + '）'"></h3>
                    </div>
                  </div>
                  <div class="kt-portlet__body">
                    <div class="kt-list-timeline">
                      <div class="kt-list-timeline__items">
                        <div class="kt-align-center" v-if="learnedKnowledgeAnalysisList.length == 0">
                          暂时还没有已掌握的知识点
                        </div>
                        <div class="kt-list-timeline__item" v-if="learnedKnowledgeAnalysisList.length > 0" v-for="knowledge in learnedKnowledgeAnalysisList">
                          <span class="kt-list-timeline__badge kt-list-timeline__badge--success"></span>
                          <span class="kt-list-timeline__text" v-text="knowledge.knowledgeName"></span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="kt-portlet">
                  <div class="kt-portlet__head">
                    <div class="kt-portlet__head-label">
                      <h3 class="kt-portlet__head-title" v-text="'正在练习的知识点（' + learningKnowledgeAnalysisList.length + '）'"></h3>
                    </div>
                  </div>
                  <div class="kt-portlet__body">
                    <div class="kt-list-timeline">
                      <div class="kt-list-timeline__items weakness-knowledge">
                        <div class="kt-align-center" v-if="learningKnowledgeAnalysisList.length == 0">暂时还没有正在练习的知识点</div>
                        <div class="kt-list-timeline__item" v-if="learningKnowledgeAnalysisList.length > 0" v-for="knowledge in learningKnowledgeAnalysisList">
                          <span class="kt-list-timeline__badge kt-list-timeline__badge--danger"></span>
                          <span class="kt-list-timeline__text" v-text="knowledge.knowledgeName"></span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-4">
                <div class="kt-portlet">
                  <div class="kt-portlet__head">
                    <div class="kt-portlet__head-label">
                      <h3 class="kt-portlet__head-title" v-text="'未掌握的知识点（' + pendingKnowledgeAnalysisList.length + '）'" ></h3>
                    </div>
                  </div>
                  <div class="kt-portlet__body">
                    <div class="kt-list-timeline">
                      <div class="kt-list-timeline__items">
                        <div class="kt-align-center" v-if="pendingKnowledgeAnalysisList.length == 0">太棒了，所有的知识点全都学习过了！</div>
                        <div class="kt-list-timeline__item" v-if="pendingKnowledgeAnalysisList.length > 0" v-for="knowledge in pendingKnowledgeAnalysisList">
                          <span class="kt-list-timeline__badge kt-list-timeline__badge--primary"></span>
                          <span class="kt-list-timeline__text" v-text="knowledge.knowledgeName"></span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="kt_modal_code_standard" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content" style="">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">代码规范出错情况</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          </button>
        </div>
        <div class="modal-body">
          <div class="kt-scroll ps ps--active-y" data-scroll="true" data-height="450"
               style="max-height: 450px; overflow: hidden;">
            <table class="table table-striped" id="table_code_standard">
              <thead>
              <tr>
                <th style="width: 15%">#</th>
                <th style="width: 65%">代码规范</th>
                <th style="width: 20%">出错次数</th>
              </tr>
              </thead>
              <tbody>
              </tbody>
            </table>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
        </div>
      </div>
    </div>

  </div>

  <div class="modal fade" id="kt_modal_exercise" tabindex="-1" role="dialog">
    <div class="modal-dialog modal-xl" role="document">
      <div class="modal-content" style="">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">练习题</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          </button>
        </div>
        <div class="modal-body">
          <div>
            <button type="button" class="btn btn-pill btn-sm btn-info btn-filter" data-status="NULL">全部</button>
            <button type="button" class="btn btn-pill btn-sm btn-outline-hover-info btn-filter" data-status="P">未练习
            </button>
            <button type="button" class="btn btn-pill btn-sm btn-outline-hover-info btn-filter" data-status="W">待批改
            </button>
            <button type="button" class="btn btn-pill btn-sm btn-outline-hover-info btn-filter" data-status="R">待修改
            </button>
            <button type="button" class="btn btn-pill btn-sm btn-outline-hover-info btn-filter" data-status="S">已通过
            </button>
          </div>
          <table class="table table-striped" id="table_exercise">
            <thead>
            <tr>
              <th style="width: 25%">知识点</th>
              <th style="width: 25%">练习题</th>
              <th style="width: 15%">下发时间</th>
              <th style="width: 15%">提交时间</th>
              <th style="width: 10%">习题状态</th>
              <th style="width: 10%">查看作品</th>
            </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
          <div class="kt-pagination kt-pagination--warning kt-pagination--circle">
            <ul class="kt-pagination__links exercise-pagination">
            </ul>
            <div class="kt-pagination__toolbar">
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
        </div>
      </div>
    </div>

  </div>

</div>
<script>
  $(document).ready(function () {
    commonUtility.appendScript('/javascripts/views/abilityAnalysisDetail_v2.js');
  });
</script>